// Home Data
const homeData = {
    name: "Karan Dev",
    email: "karandev43@gmail.com",
    location: "Bengaluru, India",
    profileImage: "assets/images/home/karan.jpg",
    description: [
        "With deep experience in backend systems and a growing focus on GenAI, I build intelligent tools that adapt to user needs. My background spans engineering management, system design, and applied AI—from optimizing media pipelines to designing platforms for scalable contributor profiling.",
        "Today, I'm building next-gen AI products aimed at enhancing productivity and decision-making across domains."
    ],
    socialLinks: {
        github: "https://github.com/karan10",
        linkedin: "https://linkedin.com/in/karandev",
        x: "https://x.com/iamkarandev"
    }
};

// Work Data
const workData = [
    {
        "title": "Indie AI Builder & Engineering Leader",
        "company": "Independent Projects",
        "period": "2025 - Present",
        "description": "Currently building AI-driven products as an indie builder, focused on solving meaningful problems in the consumer and productivity space. My work spans from designing backend architectures and integrating LLMs to crafting user-centric experiences — leveraging my background in engineering leadership, scalable systems, and product thinking.",
        "url": ""
    },
    {
        title: "Software Engineering Manager",
        company: "Telus Digital AI Data Solutions [Acquired Playment (YC-w17)]",
        period: "2017 - 2025",
        description: "I started my journey at Telus Digital as a software engineer after Playment's acquisition and grew into an engineering manager over the years. I've built everything from media pipelines and internal tools to GenAI platforms that powered major business wins. Along the way, I've led teams, scaled systems, hired great talent, and aligned engineering closely with product impact — all while keeping uptime high and cloud costs low.",
        url: "https://www.telusdigital.com/solutions/data-and-ai-solutions"
    },
    {
        title: "Software Engineer",
        company: "Collegedunia",
        period: "2015 - 2017",
        description: "At Collegedunia, I worked on high-impact backend systems powering apps like Frizza (5M+ downloads). I built core features like wallet recharges, notifications, and admin tools. I also developed campaign platforms for alumni engagement and advertiser dashboards to streamline data tracking and reporting.",
        url: "https://collegedunia.com"
    },
    {
        title: "Software Engineer",
        company: "WealthPack (Acquired By Edelweiss)",
        period: "2015 - 2015",
        description: "At Wealthpack, I worked on automating personal finance insights — building a PDF generation pipeline using Django and PDFCrowd, creating regex-driven data extraction from emails and SMS, and improving vendor categorization with ElasticSearch for smarter analytics.",
        url: "#"
    }
];

// Projects Data
const projectsData = [
    {
        title: "Spotifyi - Weekly wrapped",
        description: "Generates weekly Spotify Wrapped-style summaries, giving users insights into their top tracks, artists, and listening patterns. Integrated Spotify OAuth, handled user-specific data securely, and automated visual summaries for shareability — all with a focus on clean UX and lightweight performance.",
        image: "assets/images/projects/spotifyi.png",
        url: "https://spotifyi.onrender.com/"
    }
];

// Anime Data
const animeData = [
    {
      "title": "Attack on Titan",
      "studio": "by Wit Studio / MAPPA",
      "description": "Humanity fights for survival in walled cities against man‑eating giants known as Titans.",
      "image": "https://cdn.myanimelist.net/images/anime/10/47347.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt2560140/",
      "type": "series",
      "rating": 5,
      "status": "completed"
    },
    {
      "title": "Death Note",
      "studio": "by Madhouse",
      "description": "A high school student discovers a supernatural notebook that allows him to kill anyone by writing their name.",
      "image": "https://cdn.myanimelist.net/images/anime/9/9453.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0877057/",
      "type": "series",
      "rating": 5,
      "status": "completed"
    },
    {
      "title": "Demon Slayer",
      "studio": "by ufotable",
      "description": "After his family is slaughtered and his sister turned into a demon, a young man becomes a demon slayer.",
      "image": "https://cdn.myanimelist.net/images/anime/1286/99889.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt9335498/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Jujutsu Kaisen",
      "studio": "by MAPPA",
      "description": "A high schooler swallows a cursed talisman and joins a secret school to fight malevolent cursed spirits. ",
      "image": "https://cdn.myanimelist.net/images/anime/1171/109222.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt12343534/",
      "type": "series",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Solo Leveling",
      "studio": "by A-1 Pictures",
      "description": "In a world of Hunters and monster-filled Gates, the weakest hunter gains the unique power to level up and becomes a formidable force. ",
      "image": "https://cdn.myanimelist.net/images/anime/52594/138276.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt21209876/",
      "type": "series",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Elfen Lied",
      "studio": "by Arms",
      "description": "A genetically mutated girl with telekinetic vectors escapes a lab and struggles with violence, identity, and discrimination. ",
      "image": "https://cdn.myanimelist.net/images/anime/5/32689.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0380136/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Your Name",
      "studio": "by CoMix Wave Films",
      "description": "A boy and girl mysteriously swap bodies and form a deep connection while seeking each other across time and space.",
      "image": "https://cdn.myanimelist.net/images/anime/5/87048.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt5311514/",
      "type": "movie",
      "rating": 5,
      "status": "completed"
    },
    {
      "title": "I Want to Eat Your Pancreas",
      "studio": "by Studio VOLN",
      "description": "A high school boy bonds with a terminally ill girl who wants to live life to the fullest.",
      "image": "https://cdn.myanimelist.net/images/anime/13/88738.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt7815470/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Naruto",
      "studio": "by Studio Pierrot",
      "description": "A young ninja seeks recognition and dreams of becoming his village's greatest leader.",
      "image": "https://cdn.myanimelist.net/images/anime/13/17405.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0409591/",
      "type": "series",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Tokyo Revengers",
      "studio": "by LIDENFILMS",
      "description": "A man travels back in time to his middle school years to save his girlfriend—and change the fate of his friends in a violent gang.",
      "image": "https://cdn.myanimelist.net/images/anime/1692/115237.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt13036154/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Parasyte",
      "studio": "by Madhouse",
      "description": "A teen's right hand is infected by a parasite, forcing him into an uneasy partnership as alien parasites attack humanity.",
      "image": "https://cdn.myanimelist.net/images/anime/3/55121.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt1568346/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "One Piece",
      "studio": "by Toei Animation",
      "description": "A boy with rubber powers sails the Grand Line in search of the legendary treasure known as One Piece.",
      "image": "https://cdn.myanimelist.net/images/anime/6/73245.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0388629/",
      "type": "series",
      "rating": 4,
      "status": "watching"
    },
    {
      "title": "Monster",
      "studio": "by Madhouse",
      "description": "A brilliant doctor's life unravels after he saves a child who grows up to become a dangerous serial killer.",
      "image": "https://cdn.myanimelist.net/images/anime/1/2433.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0380269/",
      "type": "series",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Vinland Saga",
      "studio": "by Wit Studio / MAPPA",
      "description": "A young Viking warrior seeks revenge and meaning in a brutal age of conquest and bloodshed.",
      "image": "https://cdn.myanimelist.net/images/anime/10/85109.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt7972104/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Cowboy Bebop",
      "studio": "by Sunrise",
      "description": "Bounty hunters journey through space, tackling jobs and their pasts aboard the spaceship Bebop.",
      "image": "https://cdn.myanimelist.net/images/anime/4/19644.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0213338/",
      "type": "series",
      "rating": 3,
      "status": "watching"
    },
    {
      "title": "Violet Evergarden",
      "studio": "by Kyoto Animation",
      "description": "An ex‑soldier learns to understand emotions and re‑integrate into society by writing letters that connect people.",
      "image": "https://cdn.myanimelist.net/images/anime/10/75105.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt8628734/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Howl's Moving Castle",
      "studio": "by Studio Ghibli",
      "description": "A young woman cursed with aging seeks refuge in a moving castle owned by a mysterious wizard.",
      "image": "https://cdn.myanimelist.net/images/anime/9/79725.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0347149/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "The Garden of Words",
      "studio": "by CoMix Wave Films",
      "description": "A chance meeting between a mourning student and older woman forges an unlikely connection in a Japanese rainy-season park.",
      "image": "https://cdn.myanimelist.net/images/anime/3/78383.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt4034354/",
      "type": "movie",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Spirited Away",
      "studio": "by Studio Ghibli",
      "description": "A young girl enters a mysterious spirit world and must save her parents after they are turned into pigs.",
      "image": "https://cdn.myanimelist.net/images/anime/6/79597.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0245429/",
      "type": "movie",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Sakamoto Days",
      "studio": "TBD",
      "description": "A former legendary hitman lives a peaceful life running a convenience store—but danger finds him anyway.",
      "image": "",
      "imdbUrl": "https://www.imdb.com/",
      "type": "series",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Perfect Blue",
      "studio": "by Madhouse",
      "description": "A pop idol's life unravels in a dangerous spiral when she begins to descend into madness and stalking after retiring.",
      "image": "https://cdn.myanimelist.net/images/anime/1/76063.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0156887/",
      "type": "movie",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "A Silent Voice",
      "studio": "by Kyoto Animation",
      "description": "A former bully reconnects with the deaf girl he tormented as a child, seeking redemption and forgiveness.",
      "image": "https://cdn.myanimelist.net/images/anime/7/75824.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt5323662/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Chainsaw Man",
      "studio": "by MAPPA",
      "description": "A boy merges with a Chainsaw Devil and joins a government agency hunting devils for money.",
      "image": "https://cdn.myanimelist.net/images/anime/1591/109364.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt9128412/",
      "type": "series",
      "rating": 4,
      "status": "completed"
    },
    {
      "title": "Tokyo Ghoul",
      "studio": "by Studio Pierrot",
      "description": "A college student becomes part-ghoul after a deadly encounter and struggles with his new identity in ghoul society.",
      "image": "https://cdn.myanimelist.net/images/anime/5/55169.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt2024473/",
      "type": "series",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Erased",
      "studio": "by A-1 Pictures",
      "description": "A man with time‑travel ability goes back to his childhood to prevent a series of kidnappings and murders.",
      "image": "https://cdn.myanimelist.net/images/anime/10/75878.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt4675174/",
      "type": "series",
      "rating": 2,
      "status": "completed"
    },
    {
      "title": "Paprika",
      "studio": "by Madhouse",
      "description": "A therapist enters patients' dreams using a device but faces chaos when the boundary between dream and reality collapses.",
      "image": "https://cdn.myanimelist.net/images/anime/2/2625.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0851578/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "Weathering with You",
      "studio": "by CoMix Wave Films",
      "description": "A runaway boy meets a girl who can manipulate weather, and they set out to change Tokyo's endless rain.",
      "image": "https://cdn.myanimelist.net/images/anime/13/88738.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt5841274/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    },
    {
      "title": "5 Centimeters per Second",
      "studio": "by CoMix Wave Films",
      "description": "Three interconnected tales explore the bittersweet passage of time and young love.",
      "image": "https://cdn.myanimelist.net/images/anime/4/76365.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0983213/",
      "type": "movie",
      "rating": 5,
      "status": "completed"
    },
    {
      "title": "The Girl Who Leapt Through Time",
      "studio": "by Madhouse",
      "description": "A high school girl discovers she can leap through time and uses her power to fix mistakes—until consequences arise.",
      "image": "https://cdn.myanimelist.net/images/anime/4/72039.jpg",
      "imdbUrl": "https://www.imdb.com/title/tt0437086/",
      "type": "movie",
      "rating": 3,
      "status": "completed"
    }
  ];

// Timeline Enhancement
document.addEventListener('DOMContentLoaded', function() {
    // Add scroll-triggered animations
    const timelineItems = document.querySelectorAll('.timeline-item');
    
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    timelineItems.forEach(item => {
        observer.observe(item);
    });

    // Add hover effects for timeline dots
    timelineItems.forEach(item => {
        const dot = item.querySelector('::before');
        
        item.addEventListener('mouseenter', () => {
            // Add a subtle glow effect
            item.style.transform = 'translateX(3px)';
        });
        
        item.addEventListener('mouseleave', () => {
            item.style.transform = 'translateX(0)';
        });
    });

    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add typing effect for the main heading (if on home page)
    const heroTitle = document.querySelector('.hero-content h1');
    if (heroTitle && window.location.pathname.includes('index.html') || window.location.pathname === '/') {
        const text = heroTitle.textContent;
        heroTitle.textContent = '';
        heroTitle.style.borderRight = '2px solid var(--accent-color)';
        
        let i = 0;
        const typeWriter = () => {
            if (i < text.length) {
                heroTitle.textContent += text.charAt(i);
                i++;
                setTimeout(typeWriter, 100);
            } else {
                setTimeout(() => {
                    heroTitle.style.borderRight = 'none';
                }, 1000);
            }
        };
        
        setTimeout(typeWriter, 500);
    }

    // Anime Filter and Sort functionality
    if (window.location.pathname.includes('anime.html')) {
        initializeAnimeFilters();
    }

    // Projects rendering functionality
    if (window.location.pathname.includes('projects.html')) {
        renderProjectsList();
    }
});

// Anime Filter and Sort Functions
function initializeAnimeFilters() {
    const animeList = document.getElementById('anime-list');
    
    // Get unique studios and types from data
    const studios = [...new Set(animeData.map(anime => anime.studio))].sort();
    const types = [...new Set(animeData.map(anime => anime.type))].sort();
    
    // Create filter controls
    const controlsHTML = `
        <div class="anime-controls">
            <div class="filter-group">
                <label for="status-filter">Status:</label>
                <select id="status-filter">
                    <option value="">All</option>
                    <option value="watching">Currently Watching</option>
                    <option value="completed">Completed</option>
                    <option value="planning">Planning</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="studio-filter">Studio:</label>
                <select id="studio-filter">
                    <option value="">All Studios</option>
                    ${studios.map(studio => `<option value="${studio}">${studio}</option>`).join('')}
                </select>
            </div>
            <div class="filter-group">
                <label for="type-filter">Type:</label>
                <select id="type-filter">
                    <option value="">All Types</option>
                    ${types.map(type => `<option value="${type}">${type}</option>`).join('')}
                </select>
            </div>
            <div class="sort-group">
                <label for="sort-by">Sort by:</label>
                <select id="sort-by">
                    <option value="title">Title</option>
                    <option value="rating">Rating</option>
                    <option value="studio">Studio</option>
                </select>
            </div>
        </div>
    `;
    
    animeList.insertAdjacentHTML('beforebegin', controlsHTML);
    
    // Render initial anime list
    renderAnimeList(animeData);
    
    // Add event listeners
    document.getElementById('status-filter').addEventListener('change', filterAnime);
    document.getElementById('studio-filter').addEventListener('change', filterAnime);
    document.getElementById('type-filter').addEventListener('change', filterAnime);
    document.getElementById('sort-by').addEventListener('change', filterAnime);
}

function filterAnime() {
    const statusFilter = document.getElementById('status-filter').value;
    const studioFilter = document.getElementById('studio-filter').value;
    const typeFilter = document.getElementById('type-filter').value;
    const sortBy = document.getElementById('sort-by').value;
    
    let filteredAnime = [...animeData];
    
    // Apply filters
    if (statusFilter) {
        filteredAnime = filteredAnime.filter(anime => anime.status === statusFilter);
    }
    
    if (studioFilter) {
        filteredAnime = filteredAnime.filter(anime => anime.studio === studioFilter);
    }
    
    if (typeFilter) {
        filteredAnime = filteredAnime.filter(anime => anime.type === typeFilter);
    }
    
    // Apply sorting
    filteredAnime.sort((a, b) => {
        switch (sortBy) {
            case 'rating':
                return b.rating - a.rating;
            case 'title':
                return a.title.localeCompare(b.title);
            case 'studio':
                return a.studio.localeCompare(b.studio);
            default:
                return 0;
        }
    });
    
    renderAnimeList(filteredAnime);
}

function renderAnimeList(animeList) {
    const animeListElement = document.getElementById('anime-list');
    
    const animeHTML = animeList.map(anime => {
        // Convert rating from 10-point scale to 5-point scale
        const ratingOutOf5 = anime.rating
        const fullStars = anime.rating;
        const hasHalfStar = anime.rating % 2 !== 0;
        
        // Generate star HTML
        let starsHTML = '';
        for (let i = 0; i < 5; i++) {
            if (i < fullStars) {
                starsHTML += '<span class="star">★</span>';
            } else if (i === fullStars && hasHalfStar) {
                starsHTML += '<span class="star">★</span>';
            } else {
                starsHTML += '<span class="star empty">★</span>';
            }
        }
        
        return `
            <div class="project-card" onclick="window.open('${anime.imdbUrl}', '_blank')">
                <div class="anime-badge ${anime.status}">${getStatusText(anime.status)}</div>
                <h3>${anime.title}</h3>
                <img src="${anime.image}" alt="${anime.title}">
                <p><em>${anime.studio}</em></p>
                <div class="description-container">
                    <div class="description-text" id="desc-${anime.title.replace(/\s+/g, '-')}">
                        ${anime.description}
                    </div>
                    <button class="more-button" onclick="event.stopPropagation(); toggleDescription('${anime.title.replace(/\s+/g, '-')}')">
                        Show more
                    </button>
                </div>
                <div class="rating-container">
                    <div class="rating-stars">
                        ${starsHTML}
                    </div>
                    <span class="rating-text">${ratingOutOf5}/5</span>
                </div>
            </div>
        `;
    }).join('');
    
    animeListElement.innerHTML = animeHTML;
}

function toggleDescription(animeId) {
    const descriptionElement = document.getElementById(`desc-${animeId}`);
    const moreButton = descriptionElement.nextElementSibling;
    
    if (descriptionElement.classList.contains('expanded')) {
        descriptionElement.classList.remove('expanded');
        moreButton.textContent = 'Show more';
    } else {
        descriptionElement.classList.add('expanded');
        moreButton.textContent = 'Show less';
    }
}

function getStatusText(status) {
    switch (status) {
        case 'watching':
            return 'Currently Watching';
        case 'completed':
            return 'Completed';
        case 'planning':
            return 'Planning to Watch';
        default:
            return status;
    }
}

// Projects rendering function
function renderProjectsList() {
    const projectsList = document.getElementById('projects-list');
    
    const projectsHTML = projectsData.map(project => `
        <div class="project-card" onclick="window.open('${project.url}', '_blank')">
            <h3>${project.title}</h3>
            <img src="${project.image}" alt="${project.title}">
            <div class="description-container">
                <div class="description-text" id="proj-desc-${project.title.replace(/\s+/g, '-')}">
                    ${project.description}
                </div>
                <button class="more-button" onclick="event.stopPropagation(); toggleProjectDescription('${project.title.replace(/\s+/g, '-')}')">
                    Show more
                </button>
            </div>
            <div class="project-links">
                <a href="${project.url}" target="_blank" onclick="event.stopPropagation()">
                    <i class="fas fa-external-link-alt"></i>
                    View Project
                </a>
            </div>
        </div>
    `).join('');
    
    projectsList.innerHTML = projectsHTML;
}

function toggleProjectDescription(projectId) {
    const descriptionElement = document.getElementById(`proj-desc-${projectId}`);
    const moreButton = descriptionElement.nextElementSibling;
    
    if (descriptionElement.classList.contains('expanded')) {
        descriptionElement.classList.remove('expanded');
        moreButton.textContent = 'Show more';
    } else {
        descriptionElement.classList.add('expanded');
        moreButton.textContent = 'Show less';
    }
} 